# Заметки по Git и GitHub, включая работу в VS Code

## Содержание
* [Вступление](#вступление)
* [Установка и базовые настройки](#установка-и-базовые-настройки)
* [Начало работы (git add, git commit, git status, git log)](#начало-работы-git-add-git-commit-git-status-git-log)
* [Разница между состояниями репозитория (git diff)](#разница-между-состояниями-репозитория-git-diff)
* [Дополнительные команды и разные ситуации](#дополнительные-команды-и-разные-ситуации)

## Вступление
[Вернуться к содержанию][toc]

Данный файл написан для напоминания себе команд git если я их забуду. Возможно, этот файл поможет освоить git людям, которые только начинают работать с ним. Как я :wink:. Заодно попрактикуюсь в написании текста с разметкой markdown.

#### Дополнительные заметки:

* Информация по git написана на основе [курса Наиля Алишева на Udemy](https://www.udemy.com/course/git-alishev/).
* [Видео][AndrikanichVSCvideo] "Фрилансера по жизни" Жеки Андриканича про привязку к VS Code репозитория из GitHub. Начинающим надо смотреть.

## Установка и базовые настройки
[Вернуться к содержанию][toc]

**Скачиваем** дистрибутив git'а для Windows [здесь](https://gitforwindows.org/).
При установке обязательно отметь галочку напротив GIT bash, чтобы его тоже поставить.

После установки нужно провести базовые настройки:
1. Открываем **git bash** (ПКМ на папке какой-нибудь, например, Рабочий стол :no_good:, если папка проекта еще не создана. Если создана, то открываем в ней и шаги 5 и 6 пропускаем).
2. Устанавливаем свое имя (имя указывай в кавычках):
```
git config --global user.name "Имя"
```
3. <span id="setup-global-email">Устанавливаем почту</span> (почту указывай без кавычек):
```
git config --global user.email example@ex.com
```
4. Включаем цвета (может быть уже включено):
```
git config --global color.ui true
```
5. Создаем папку проекта (если в названии папки есть пробел, то тогда имя папки пишем в кавычках):
```
mkdir название_проекта
```
6. Переходим в эту папку (также, в кавычках имя папки если в имени папки есть пробел)
```
cd название_проекта/
```
7. <span id="git-inizialization">Выполняем инициализацию git репозитория</span> (тогда появится скрытая папка .git в папке проекта и эта папка проекта будет работать с git):
```
git init
```

#### Дополнительные заметки:

1. **ВАЖНО!** Смотри, чтобы в git bash ты был в папке проекта перед тем как писать `git init` на 7м шаге.
2. На первом шаге git bash открывается из любой папки. Тогда в папку проекта можно перейти командой `cd имя_нужной_папки`. Но проще сразу зайти через Проводник или файловый менеджер в папку проекта и оттуда через контекстное меню (ПКМ) вызвать git bash - так в git bash будет открыта сразу папка проекта и никуда не нужно будет переходить командой `cd`. Можно пропустить шаги 5 и 6 если открыть git bash сразу в папке проекта (если она уже создана).

## Начало работы (git add, git commit, git status, git log)
[Вернуться к содержанию][toc]

Здесь про команды `git add`, `git commit`, `git status`, `git log`.

Общий принцип добавления файлов и учет изменений после создания папки проекта и [инициализации git](#git-inizialization) в папке проекта такой:

1. Создаем новый файл. На этом этапе он еще не отслеживается git'ом и имеет статус **untracked**. Т.е. git не будет сохранять изменения этого файла, он его не воспринимает. После создания файла можно проверить статус репозитория (папки). Там должно быть указан список файлов, которые не отслеживаются. 
```
git status
```
2. Добавляем файл для отслеживания (имя файла в кавычках, если в нем есть пробелы). Если файл только создан и добавлен командой `git add`, то он сразу имеет статус **staged changes**. Это состояние, когда изменения готовы к коммиту (про коммиты позже), После изменений нужно будет всегда указывать `git add`, чтобы перевести файл в состояние **staged changes**:
```
git add имя_фалйа
```
3. Далее, когда файлы добавлены к отслеживанию, сохранены, получили статус **staged changes**, можно делать коммит. Здесь флаг `-m` говорит о том, что дальше у коммита будет сообщение. Это обязательно надо делать.
```
git commit -m "сообщение"
```
4. После можно опять проверить статус репозитория командой `git status` и увидеть, что ничего нет для коммита, нет изменений и т.д.
5. Дополнительно можно посмотреть список всех коммитов в репозитории (последний коммит находится выше, самый первый - снизу):
```
git log
```
<!-- TODO Сделай еще сслыку на то, как в VS code эти статусы отображаются. -->
Здесь принцип измененя статусов следующий:

Что я сделал | Команда git | Статус файла | Статус файла в Source Control в VS Code
--- | --- | --- | ---
Инициализировал репозиторий | `git init` | - | -
Создал файл в Проводнике, что-то там сделал, сохранил | - | Untracked | Changes
Добавил файл для отслеживания (в VS Code это значит применил изменения) | `git add имя_файла` | Tracked * | Staged changes 
Сделал коммит | `git commit -m "Сообщение"` | - | -
Вношу изменения в файл и сохраняю его, но еще не добавляю для отслеживания через `git add`, потом проверяю статус | `git status` | Modified | Changes

\* - там будет список отслеживаемых файлов с обозначением "new file:".

<!-- TODO Добавить картинок про VS Code -->

#### Дополнительные заметки:

> **Commit** (коммит) - это как сохранение в игре. В любом месте можно сохранить игру и потом в любой момент можно начать с этого сохранения. Также и тут. Делается слепок / снимок репозитория, и ты можешь потом к нему вернуться.

Варианты использования команды `add`:
* Добавить список файлов к отслеживанию. Файлы указываются через пробел:
```
git add список_файлов
```
* Добавить все файлы в текущей папке:
```
git add .
```
* Добавить все файлы в текущей папке с расширением .js:
```
git add *.js
```
* Добавить все файлы в папке someDir  с расширением .js:
```
git add someDir/*.js
```
* Добавить все файлы в папке someDir:
```
git add someDir/
```
* Добавить все файлы в проекте с расширением .js (используем кавычки):
```
git add "*.js"
```

## Разница между состояниями репозитория (git diff)
[Вернуться к содержанию][toc]

Еще раз про состояния файлов. Есть файлы, изменения которыех не отслеживаются, есть которых отслеживаются. Неотслеживаемые файлы - это файлы, Изначально git не отслеживает изменения в файлах. В git это файлы со статусом **untracked**. В VS Code в Source Control эти файлы попадают в раздел Changes. Когда я добавляю файл к отслеживанию через `git add`, то он меняет свой статус на **tracked** (отслеживаемый). В VS Code об этом скажет Sorce Control - файлы из раздела **changes** поступают в раздел **staged changes**. Отслеживаемые файлы - файлы, изменения которых сохранятся в коммите, который ты сделаешь. По тому как сделать это в VS Code, посмотри [этот небольшой отрезок про работу GitHub и VS Code на 58:49][AndrikanichVSCvideo] из видео Жеки Андриканича Фрилансера по жизни.
<!-- TODO картинки по VS Code поставь -->

Так вот, к чему это все. Есть команда `git diff`, которая позволяет сравнивать отслеживаемые файлы, неотслеживаемые и коммиты.

* Чтобы сравнить изменения **неотслеживаемые с последним коммитом**, пиши:
```
git diff
```
* Чтобы сравнить изменения **отслеживаемые с последним коммитом**, пиши:
```
git diff --staged
```
* Чтобы сравнить **текущее состояние** репозитория **с определенным коммитом**, вызови лог коммитов, скопируй хэш необходмого коммита и вставь его в команду:
```
git diff хэш_коммита
```
## Дополнительные команды и разные ситуации
[Вернуться к содержанию][toc]

* **Почистить git bash** от лишней информации. Когда нужен чистый экран:
```
clear
```

* **Остановить выполнение команды**. Например, ввел по запаре `git config --list` и обнаружил, что больше ты ничего писать не можешь и в строке только двоеточие есть и тебе показан большой список каких-то настроек и можешь только Enter нажимать. Эта кнопка остановит действие текущей операции. Но потом, лично у меня, текст введенных команд не отображался и приходилось перезапускать git bash. :neutral_face:
```
q
```

* На **GitHub** делаю, значит, коммиты. А потом замечаю, что напротив коммитов даже стандартная иконка аватара стала вдруг отличаться от обычной. И имя больше не воспринимается как ссылка. Т.е. даже зайти в профиль не могу по той ссылке. Будто и не я вовсе делаю коммиты. Потом заметил, что в профиле в статистике **не меняется количесто коммитов**. Сделал 18, а в профиле показывает только 9. Хотя имя то же самое. В чем дело? Как оказалось, дело в почте. Точнее, в том, что в настройках git'а указана была почта другая, не почта моего профиля. Об этом еще VS Code говорит: красный значек - не ты коммитишь, зеленый - ты.  Это произошло из-за моих экспериментов и я забыл поставить рабочую почту обратно. Решение - [установить свою почту в настройках](#setup-global-email).

[toc]: #содержание
[AndrikanichVSCvideo]: https://youtu.be/nxCLXMBl4e4?t=3530